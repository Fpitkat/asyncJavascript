<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <title>Async Javascript</title>
    <link
      rel="stylesheet"
      href="styles.css"
    />
  </head>

  <body>
    <h1>Async Javascript / Promises</h1>
    <p>
      In this project, I learned about the fundamental
      concepts of JavaScript Promises and how they are used
      to handle asynchronous operations. I learned how to
      create a new Promise with resolve and reject
      parameters, and how to handle the results using
      .then(), .catch(), and .finally() methods. I also
      learned about the Promise.all() method, which is used
      when you want to execute multiple promises
      simultaneously and wait for all of them to complete. I
      practiced this concept by fetching data from multiple
      URLs. Lastly, I was introduced to the async/await
      syntax, which is a new way to handle asynchronous
      operations in a more synchronous manner. This syntax
      makes the code cleaner and easier to understand. This
      project was a great opportunity to understand how to
      handle asynchronous operations in JavaScript, which is
      a crucial skill for any JavaScript developer.
    </p>

    <p>Promises</p>
    <pre>

            const promise = new Promise((resolve, reject) => {
              if (true) {
                resolve('It worked');
            } else {
                reject('Error, it broke');
              }
            });

            promise
              .then((result) => {
                new Error();
                return console.log(result + '!');
              })
              .then((result2) => {
                console.log(result2);
              })
              .catch((error) => console.log(error));
        
      </pre
    >
    <p>Promise.all()</p>
    <pre>
          const urls = [
          'https://jsonplaceholder.typicode.com/users',
          'https://jsonplaceholder.typicode.com/posts',
          'https://jsonplaceholder.typicode.com/albums', ];
          
          
          Promise.all( urls.map((url) => { return
          fetch(url).then((res) => res.json()); }) )
          .then((results) => { console.log(results[0]);
          console.log(results[1]); console.log(results[2]); })
          .catch((e) => console.log(e));
        
      </pre
    >
    <p>async / await</p>
    <pre>
          async function fetchUsers() {
            const res = await fetch('https://jsonplaceholder.typicode.com/users');
            const data = await res.json();
            console.log(data);
          }

          fetchUsers();

          const urls = [
            'https://jsonplaceholder.typicode.com/users',
            'https://jsonplaceholder.typicode.com/posts',
            'https://jsonplaceholder.typicode.com/albums',
          ];

          const getData = async function () {
              try {
                const [users, posts, albums] = await Promise.all(
                  urls.map((url) => {
                    return fetch(url).then((res) => res.json());
                  })
                );
                console.log('users', users);
                console.log('posts', posts);
                console.log('albums', albums);
              } catch (err) {
                console.log('ooops', err);
              }
            };
      </pre
    >
    <p>for await of</p>
    <pre>
      const getData2 = async function () {
        const arrayOfPromises = urls.map((url) =>
        fetch(url).then((res) => res.json())
        );
        for await (let request of arrayOfPromises) {
          console.log(request);
        }
      };

      getData2();
    </pre>

    <script
      src="script.js"
      type="text/Javascript"
    ></script>
  </body>
</html>
